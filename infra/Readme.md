### üìò **Entrypoint ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?**

**Entrypoint** (‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô) ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠ **‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå** (‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ô Docker ‡∏´‡∏£‡∏∑‡∏≠ Kubernetes)  
- ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡πá‡∏ô *master*, *worker*, ‡∏´‡∏£‡∏∑‡∏≠ *history server*  
- ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ô‡∏µ‡πâ `entrypoint.sh` ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‚Äù ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° Spark ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÉ‡∏î

> üí° ‡∏Ñ‡∏¥‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ: Entrypoint ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô ‚Äú‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‚Äù ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå ‚Äî ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏°‡∏≠

---

### üîç **‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡πâ‡∏î `entrypoint.sh` ‡∏ó‡∏µ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô**

#### 1. **Shebang ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢**
```bash
#!/bin/bash
set -e
```
- `#!/bin/bash`: ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Bash shell  
- `set -e`: ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (exit code ‚â† 0) ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‚Üí ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏™‡∏∞‡∏™‡∏°

---

#### 2. **‡∏£‡∏±‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å**
```bash
SPARK_WORKLOAD=$1
```
- `$1` ‡∏Ñ‡∏∑‡∏≠ argument ‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå  
  ‡πÄ‡∏ä‡πà‡∏ô: `./entrypoint.sh master` ‚Üí `SPARK_WORKLOAD="master"`

---

#### 3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏ workload ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà**
```bash
if [ -z "$SPARK_WORKLOAD" ]; then
  echo "Error: SPARK_WORKLOAD not specified"
  echo "Usage: entrypoint.sh [master|worker|history]"
  exit 1
fi
```
- `-z` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà  
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏ ‚Üí ‡πÅ‡∏à‡πâ‡∏á error + ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ ‚Üí ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå (`exit 1` = ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß)

---

#### 4. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°**
```bash
export SPARK_HOME=${SPARK_HOME:-/opt/spark}
export PATH="${SPARK_HOME}/bin:${SPARK_HOME}/sbin:${PATH}"
```
- `${SPARK_HOME:-/opt/spark}`: ‡∏ñ‡πâ‡∏≤ `SPARK_HOME` ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á ‚Üí ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default `/opt/spark`  
- ‡πÄ‡∏û‡∏¥‡πà‡∏° Spark CLI (`spark-submit`, `start-master.sh`, ‡∏Ø‡∏•‡∏Ø) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô `PATH` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

---

#### 5. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πÄ‡∏£‡∏Å‡∏ó‡∏≠‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Event Log**
```bash
EVENT_LOG_DIR=${SPARK_EVENTLOG_DIR:-/opt/spark/spark-events}
```
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Spark History Server ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô log ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô job ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤  
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ override ‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `SPARK_EVENTLOG_DIR`

---

#### 6. **‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏µ‡∏ö‡∏±‡∏Å**
```bash
echo "Starting Spark in $SPARK_WORKLOAD mode..."
echo "SPARK_HOME: ${SPARK_HOME}"
echo "EVENT_LOG_DIR: ${EVENT_LOG_DIR}"
```
- ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏ì‡∏∞‡∏£‡∏±‡∏ô ‚Üí ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ troubleshooting

---

#### 7. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå**

##### ‚úÖ **‡πÇ‡∏´‡∏°‡∏î Master** (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ cluster)
```bash
if [ "$SPARK_WORKLOAD" == "master" ]; then
  exec ${SPARK_HOME}/sbin/start-master.sh -p 7077
```
- ‡πÄ‡∏£‡∏¥‡πà‡∏° Spark Master ‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏£‡πå‡∏ï `7077` (default)  
- ‡πÉ‡∏ä‡πâ `exec` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà process ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‚Üí ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì (signals) ‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á‡∏ñ‡∏∂‡∏á Spark Master

##### ‚úÖ **‡πÇ‡∏´‡∏°‡∏î Worker** (‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏á‡∏≤‡∏ô)
```bash
elif [ "$SPARK_WORKLOAD" == "worker" ]; then
  exec ${SPARK_HOME}/sbin/start-worker.sh spark://spark-master:7077
```
- Worker ‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Master ‡∏ó‡∏µ‡πà hostname `spark-master` (‡∏°‡∏±‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô Docker Compose ‡∏´‡∏£‡∏∑‡∏≠ Kubernetes Service)  
- ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ Master ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏£‡πå‡∏ï 7077

##### ‚úÖ **‡πÇ‡∏´‡∏°‡∏î History Server** (‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ job)
```bash
elif [ "$SPARK_WORKLOAD" == "history" ]; then
  mkdir -p ${EVENT_LOG_DIR}

  export SPARK_HISTORY_OPTS="
    -Dspark.history.fs.logDirectory=file:${EVENT_LOG_DIR}
  "

  exec ${SPARK_HOME}/sbin/start-history-server.sh
```
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πÄ‡∏£‡∏Å‡∏ó‡∏≠‡∏£‡∏µ log (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)  
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JVM option ‡πÉ‡∏´‡πâ History Server ‡∏≠‡πà‡∏≤‡∏ô log ‡∏à‡∏≤‡∏Å local filesystem  
- ‡πÄ‡∏£‡∏¥‡πà‡∏° History Server ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö UI ‡∏ó‡∏µ‡πà `http://<host>:18080`

##### ‚ùå **‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å workload**
```bash
else
  echo "Error: Unknown workload '$SPARK_WORKLOAD'"
  exit 1
fi
```
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î ‡πÄ‡∏ä‡πà‡∏ô `masterr` ‡∏´‡∏£‡∏∑‡∏≠ `workerr`

---

### üß© **‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°**

‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ **‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß** ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö ‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏Ñ‡πà argument ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ô:

| ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó |
|----------|--------|
| `entrypoint.sh master` | ‡πÄ‡∏õ‡πá‡∏ô Spark Master |
| `entrypoint.sh worker` | ‡πÄ‡∏õ‡πá‡∏ô Spark Worker |
| `entrypoint.sh history` | ‡πÄ‡∏õ‡πá‡∏ô Spark History Server |
---
